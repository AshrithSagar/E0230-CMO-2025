%% macros.tex

\newcommand{\R}{{\mathbb{R}}}
\newcommand{\N}{{\mathbb{N}}}

\newcommand{\set}[1]{{\left\{#1\right\}}}
\newcommand\spanset[1]{{\mathrm{span}\set{#1}}}

\NewDocumentCommand{\abs}{om}{{\IfNoValueTF{#1}{\left\lvert#2\right\rvert}{#1\lvert#2#1\rvert}}}
\NewDocumentCommand{\norm}{om}{{\IfNoValueTF{#1}{\left\lVert#2\right\rVert}{#1\lVert#2#1\rVert}}}
\NewDocumentCommand{\normbf}{om}{{\IfNoValueTF{#1}{\left\lVert\mathbf{#2}\right\rVert}{#1\lVert\mathbf{#2}#1\rVert}}}

\newcommand{\dotp}[2]{{{#1}^\top#2}}
\newcommand{\dotpbf}[2]{{{\mathbf{#1}}^\top\mathbf{#2}}}
\newcommand{\outp}[2]{{#1{#2}^\top}}
\newcommand{\outpbf}[2]{{\mathbf{#1}{\mathbf{#2}}^\top}}

\ExplSyntaxOn{}
\NewDocumentCommand{\qf}{mmo}{
    \IfValueTF{#3}{
        \str_if_eq:nnT {#1} {#3} {
            \PackageWarning{macros}{Argument 3 not needed}
        }
        {#1}^\top#2\,#3
    }{
        {#1}^\top#2\,#1
    }
}
\NewDocumentCommand{\qfbf}{mmo}{
    \IfValueTF{#3}{
        \str_if_eq:nnT {#1} {#3} {
            \PackageWarning{macros}{Argument 3 not needed}
        }
        {\mathbf{#1}}^\top\mathbf{#2}\:\mathbf{#3}
    }{
        {\mathbf{#1}}^\top\mathbf{#2}\:\mathbf{#1}
    }
}
\ExplSyntaxOff{}

\newcommand{\inv}[1]{{{#1}^{-1}}}

\newcommand{\func}[2]{{#1\!\left(#2\right)}}
\newcommand{\grad}[2]{{\nabla\!\func{#1}{#2}}}
\newcommand{\hess}[2]{{\nabla^2\!\func{#1}{#2}}}
\newcommand{\hessinv}[2]{\inv{\left[\hess{#1}{#2}\right]}}

\newcommand{\argmin}{\mathop{\mathrm{argmin}}}
\newcommand{\argmax}{\mathop{\mathrm{argmax}}}
\newcommand{\smalloh}[1]{\func{{\scriptstyle\mathcal{O}}}{#1}}

\newcommand{\SD}[1][d]{{\mathcal{S}_{#1}}}
\newcommand{\PSD}[1][d]{{\mathcal{S}^{+}_{#1}}}
\newcommand{\PD}[1][d]{{\mathcal{S}^{++}_{#1}}}

\newcommand{\C}{{\mathcal{C}}}

\newcommand{\x}{{\mathbf{x}}}
\newcommand{\y}{{\mathbf{y}}}
\newcommand{\z}{{\mathbf{z}}}
\newcommand{\p}{{\mathbf{p}}}
\newcommand{\h}{{\mathbf{h}}}

\newcommand{\I}{{\mathbf{I}}}
\newcommand{\Q}{{\mathbf{Q}}}
\newcommand{\Qinv}{\inv{\mathbf{Q}}}

\newcommand{\xstar}{{\x^\ast}}
\newcommand{\xhat}{{\hat{\x}}}
\newcommand{\xk}{{\x^{(k)}}}
\newcommand{\pk}{{\p^{(k)}}}
\newcommand{\xkp}{{\x^{(k+1)}}}
\newcommand{\xzero}{{\x^{(0)}}}

\newcommand{\half}{{\frac{1}{2}}}
\newcommand{\zero}{{\mathbf{0}}}
